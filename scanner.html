<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>AR Scanner</title>

  <!-- –¢–≤–æ–π —Å—Ç–∏–ª—å -->
  <link rel="stylesheet" href="css/ar-scanner.css" type="text/css" />

  <!-- IMPORT MAP: –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è three / GLTFLoader -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.164.0/build/three.module.js",
      "three/examples/jsm/loaders/GLTFLoader.js": "https://unpkg.com/three@0.164.0/examples/jsm/loaders/GLTFLoader.js"
    }
  }
  </script>
</head>
<body class="ar-scanner-page">
  <!-- —Å–∫—Ä—ã—Ç—ã–π –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –∫–∞–º–µ—Ä—ã –¥–ª—è —Å–∫–∞–Ω–µ—Ä–∞ -->
  <video id="camera-video" playsinline autoplay muted
       style="position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;"></video>


  <!-- –æ–≤–µ—Ä–ª–µ–π —Å–∫–∞–Ω–µ—Ä–∞ -->
  <div id="scan-overlay">
    <div class="scan-frame"><div class="scan-line"></div></div>
    <div class="scan-text">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ QR-–∫–æ–¥</div>
  </div>

  <!-- –∫–∞–Ω–≤–∞—Å –¥–ª—è —Ç—Ä—ë—Ö–º–µ—Ä–Ω–æ–π —Å—Ü–µ–Ω—ã -->
  <div id="ar-container" style="display:none;">
    <canvas id="ar-canvas"></canvas>
  </div>

  <!-- –∫–Ω–æ–ø–∫–∏/–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã -->
  <button id="photo-btn" style="display:none;">–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ üì∏</button>
  <button class="back-btn" onclick="window.location.href='index.html'">‚Üê –ù–∞–∑–∞–¥</button>
  <div class="loading-indicator" id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–º–µ—Ä—ã‚Ä¶</div>

  <!-- –ù–ï –º–æ–¥—É–ª—å–Ω—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–∫–∞–∫ –∏ –±—ã–ª–æ) -->
  <script src="https://unpkg.com/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="js/qr-scanner.js"></script>
  <script src="js/photo-capture.js"></script>
  <script src="js/app.js"></script>

  <!-- –ì—Ä—É–∑–∏–º –º–æ–¥—É–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä (–æ–Ω —Å–∞–º –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç three/GLTFLoader —á–µ—Ä–µ–∑ import map) -->
  <script type="module" src="js/ar-renderer.js"></script>

  <!-- –í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–∫–∞–Ω–µ—Ä –∏ –∑–∞–ø—Ä–æ—Å –∫–∞–º–µ—Ä—ã –Ω–∞ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // initScannerPage –≤–Ω—É—Ç—Ä–∏ –∑–∞–ø—É—Å—Ç–∏—Ç getUserMedia ‚Üí –ø–æ—è–≤–∏—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –∫–∞–º–µ—Ä—É
      window.arApp?.initScannerPage?.();
    });
  </script>
</body>
</html>
